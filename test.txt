import pandas as pd
import matplotlib.pyplot as plt

# Exemple de données pour rft
data = {
    'CHIFFRE_AFFAIRES': [1000000, 200000000, 600000000, 700000000, 400000000],
    'match_rft': [0, 1, 1, 0, 1]
}
rft = pd.DataFrame(data)

def pourcentage_match_rft(seuil, dataframe):
    total_avec_seuil = dataframe[dataframe.CHIFFRE_AFFAIRES >= seuil]
    match_rft_avec_seuil = total_avec_seuil[total_avec_seuil.match_rft == 1]
    
    if total_avec_seuil.shape[0] == 0:  # pour éviter une division par zéro
        return 0
    
    return (match_rft_avec_seuil.shape[0] / total_avec_seuil.shape[0]) * 100

# Génération des seuils et des pourcentages
seuils = list(range(1000000, 1000000000, 50000000))  # Ceci est un exemple; ajustez la plage et les étapes comme vous le souhaitez.
pourcentages = [pourcentage_match_rft(seuil, rft) for seuil in seuils]

# Visualisation avec matplotlib
plt.figure(figsize=(10, 6))
plt.plot(seuils, pourcentages, '-o', markersize=8)
plt.title("Pourcentage de match_rft == 1 par rapport au seuil de CHIFFRE_AFFAIRES")
plt.xlabel("Seuil de CHIFFRE_AFFAIRES")
plt.ylabel("Pourcentage de match_rft == 1")
plt.grid(True)
plt.show()
